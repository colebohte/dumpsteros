# DumpsterOS GRUB Configuration

# ============================================================================
# BASIC SETTINGS
# ============================================================================

# Timeout (seconds) - set to -1 for no timeout
set timeout=10

# Default entry (0 = first, 1 = second, etc)
set default=0

# Title for the GRUB menu
set menu_title="Dumpster OS 26 Beta 2"

# ============================================================================
# APPEARANCE SETTINGS
# ============================================================================

# Terminal colors (text/background)
# Colors: black, blue, green, cyan, red, magenta, brown, light-gray
#         dark-gray, light-blue, light-green, light-cyan, light-red
#         light-magenta, yellow, white
set color_normal=white/black
set color_highlight=light-blue/black

# Additional color settings (uncomment to customize)
# set menu_color_normal=cyan/black
# set menu_color_highlight=white/blue

# Background image (uncomment and set path)
# background_image /boot/grub/background.png
# background_image /boot/grub/background.jpg

# Screen resolution (uncomment to force a specific resolution)
# set gfxmode=1920x1080
# set gfxmode=1280x720
set gfxmode=auto

# Keep resolution after exiting GRUB (for framebuffer consoles)
# set gfxpayload=keep
# set gfxpayload=1920x1080

# Font settings (uncomment to use a custom font)
# loadfont /boot/grub/fonts/unicode.pf2
# set locale_dir=/boot/grub/locale
# set lang=en_US

# ============================================================================
# BOOT BEHAVIOR SETTINGS
# ============================================================================

# Hidden menu (press ESC to show menu)
# set timeout_style=hidden

# Record last booted entry as default for next boot
# set default=saved
# GRUB_SAVEDEFAULT=true

# Disable submenu generation
# set disable_submenu=true

# Play a beep when the menu is displayed
play 480 440 1

# ============================================================================
# SECURITY SETTINGS
# ============================================================================

# Require password for editing boot entries (uncomment and set password)
# set superusers="admin"
# password admin YourPasswordHere
# password_pbkdf2 admin grub.pbkdf2.sha512.10000.HASH_HERE

# Unrestricted access to specific menu entries (add --unrestricted to menuentry)

# ============================================================================
# PERFORMANCE SETTINGS
# ============================================================================

# Preload modules for faster boot (uncomment to enable)
# insmod gzio
# insmod part_gpt
# insmod part_msdos
# insmod ext2
# insmod fat

# Enable caching for faster subsequent boots
# set enable_cache=true

# ============================================================================
# ADVANCED SETTINGS
# ============================================================================

# Serial console settings (for headless systems)
# serial --unit=0 --speed=115200
# terminal_input serial console
# terminal_output serial console

# GRUB recording/debugging
# set debug=all
# set pager=1

# Custom GRUB prefix (where GRUB looks for files)
# set prefix=(hd0,1)/boot/grub
# Disable os-prober (stops GRUB from detecting other OSes)
# set disable_os_prober=true

# Fallback entry if default fails
set fallback=1

# Menu entry
menuentry 'DumpsterOS 26 BETA 2 (Trashfire)' {
    echo 'Loading Dumpster OS 26...'
    linux /boot/vmlinuz console=tty0
    echo 'Loading initramfs...'
    sleep 2
    echo 'Just hold on a few seconds...'
    initrd /boot/initramfs.img
    echo 'Booting Dumpster OS 26...'
}

# Advanced options submenu
submenu 'Advanced Boot Options >' {
    menuentry 'Dumpster OS (Debug Mode)' {
        linux /boot/vmlinuz console=tty0 debug
        initrd /boot/initramfs.img
    }
    
    menuentry 'Dumpster OS (Single User Mode)' {
        linux /boot/vmlinuz console=tty0 single
        initrd /boot/initramfs.img
    }
    
    menuentry 'Dumpster OS (Serial Console)' {
        linux /boot/vmlinuz console=ttyS0
        initrd /boot/initramfs.img
    }

    menuentry 'Back' {
        sleep 0
    }   
}

# Rescue menu
menuentry 'Memory Test (memtest86+) (NOT INCLUDED)' --class memtest {
    echo 'Memtest not included - install if needed'
    sleep 3
}

menuentry 'Reboot' --class restart {
    echo "Rebooting..."
    sleep 0.5
    reboot
}

menuentry 'Power Off' --class shutdown {
    echo "Halting..."
    sleep 0.5
    halt
}