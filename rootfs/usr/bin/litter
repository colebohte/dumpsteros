#!/bin/bash
# litter - The DumpsterOS text editor
# Because even trash needs editing

VERSION="1.0"
FILE="$1"
TEMP_FILE="/tmp/litter_$$"

# Colors
BOLD='\033[1m'
GREEN='\033[1;92m'
YELLOW='\033[1;33m'
PINK='\033[1;35m'
GRAY='\033[90m'
RST='\033[0m'

# Create temp file with content
if [ -f "$FILE" ]; then
    cp "$FILE" "$TEMP_FILE"
else
    touch "$TEMP_FILE"
fi

show_help() {
    clear
    echo -e "${PINK}litter${RST} v${VERSION} - The DumpsterOS Text Editor"
    echo ""
    echo -e "${BOLD}Controls:${RST}"
    echo -e "  ${GREEN}Ctrl+S${RST} - Save file"
    echo -e "  ${GREEN}Ctrl+X${RST} - Exit (prompts to save if modified)"
    echo -e "  ${GREEN}Ctrl+H${RST} - Show this help"
    echo ""
    echo -e "${GRAY}Just start typing to edit. Navigation with arrow keys.${RST}"
    echo ""
    read -p "Press Enter to continue..." -s
}

# Simple wrapper around vi with custom intro
if [ -z "$FILE" ]; then
    echo -e "${PINK}litter${RST}: No file specified"
    echo "Usage: litter <filename>"
    exit 1
fi

# Show splash
clear
echo -e "${PINK}"
echo "    ██╗     ██╗████████╗████████╗███████╗██████╗ "
echo "    ██║     ██║╚══██╔══╝╚══██╔══╝██╔════╝██╔══██╗"
echo "    ██║     ██║   ██║      ██║   █████╗  ██████╔╝"
echo "    ██║     ██║   ██║      ██║   ██╔══╝  ██╔══██╗"
echo "    ███████╗██║   ██║      ██║   ███████╗██║  ██║"
echo "    ╚══════╝╚═╝   ╚═╝      ╚═╝   ╚══════╝╚═╝  ╚═╝"
echo -e "${RST}"
echo -e "${GRAY}The DumpsterOS Text Editor${RST}"
echo ""
echo -e "Editing: ${GREEN}$FILE${RST}"
echo ""
sleep 1

# Launch vi
vi "$FILE"

echo -e "${GREEN}✓${RST} File saved"